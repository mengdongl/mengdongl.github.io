(this.webpackJsonpyixiao=this.webpackJsonpyixiao||[]).push([[0],{244:function(e,t,n){},254:function(e,t){},405:function(e,t,n){"use strict";n.r(t);var r,a,c,i=n(0),o=n.n(i),s=n(33),u=n.n(s),d=(n(244),n(24)),j=n(20),l=n(411),b=n(409),O=n(56),f=n(420),h=n(15),p=n.n(h),m=n(35),x=n(14),v=n(53),g=n(223),y=n.n(g),k=["data","headers","token"],w="https://online.com",I=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r,a,c,i,o,s,u=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r=n.data,n.headers,a=n.token,c=Object(v.a)(n,k),i=Object(x.a)({method:"GET",headers:{Authorization:a?"Bearer ".concat(a):"","Content-Type":r?"application/json":""}},c),o="","GET"===i.method.toUpperCase()?t+="?".concat(y.a.stringify(r)):i.body=JSON.stringify(r||{}),s=new RegExp(/^(https?)/),o=s.test(t)?t:"".concat(w).concat(t),e.abrupt("return",fetch(o,i).then(function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.status){e.next=5;break}return e.next=3,S();case 3:return window.location.reload(),e.abrupt("return",Promise.reject({message:"\u8bf7\u91cd\u65b0\u767b\u5f55"}));case 5:return e.next=7,t.json();case 7:if(n=e.sent,!t.ok){e.next=12;break}return e.abrupt("return",n);case 12:return e.abrupt("return",Promise.reject(n));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=be().user;return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],c=n[1];return I(a,Object(x.a)(Object(x.a)({},c),{},{token:null===e||void 0===e?void 0:e.token}))}},T="__auth_provider_token__",E=function(e){var t=e.user;return window.localStorage.setItem(T,t.token||""),t},S=function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.localStorage.removeItem(T));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=n(68),N=function(e){if(!e)return{};var t=Object(x.a)({},e);return Object.keys(e).forEach((function(n){var r;(void 0===(r=e[n])||null===r||""===r)&&delete t[n]})),t},P=function(e){Object(i.useEffect)((function(){e()}),[])},z=function(e,t){var n=Object(i.useState)(e),r=Object(j.a)(n,2),a=r[0],c=r[1];return Object(i.useEffect)((function(){var n=setTimeout((function(){c(e)}),t);return function(){clearTimeout(n)}}),[e]),a},L={stat:"idel",data:null,error:null},D={isThrowError:!1},R=function(e,t){var n=Object(i.useState)(Object(x.a)(Object(x.a)({},L),e)),r=Object(j.a)(n,2),a=r[0],c=r[1],o=Object(x.a)(Object(x.a)({},D),t),s=function(){var e=Object(i.useRef)(!1);return Object(i.useEffect)((function(){return e.current=!0,function(){e.current=!1}})),e}(),u=function(e){c({stat:"success",data:e,error:null})},d=function(e){c({stat:"error",data:null,error:e})};return Object(x.a)({isIdel:"idel"===a.stat,isLoading:"loading"===a.stat,isSuccess:"success"===a.stat,isError:"error"===a.stat,run:function(e){if(!e||!e.then)throw new Error("\u8bf7\u4f20\u5165 Promise \u7c7b\u578b\u6570\u636e");return c({stat:"loading",data:null,error:null}),e.then((function(e){return s.current&&u(e),e})).catch((function(e){return d(e),o.isThrowError?Promise.reject(e):e}))},setData:u,setError:d},a)},B=n(25),M=n(161),A=n(136),Y=n(4),q=B.a.div(r||(r=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: ",";\n  justify-content: ",";\n  & > * {\n    margin-right: ",";\n    margin-top: 0 !important;\n    margin-bottom: 0 !important;\n  }\n"])),(function(e){return"number"===typeof e.marginBottom?e.marginBottom+"rem":e.marginBottom?"2rem":"0"}),(function(e){return e.between?"space-between":""}),(function(e){return"number"===typeof e.marginRight?e.marginRight+"rem":e.marginRight?"3rem":"0rem"})),K=function(){return Object(Y.jsx)(Q,{children:Object(Y.jsx)(M.a,{})})},_=function(e){var t=e.error;return Object(Y.jsxs)(Q,{children:[Object(Y.jsx)(A.a,{}),Object(Y.jsx)(l.a.Text,{type:"danger",children:null===t||void 0===t?void 0:t.message})]})},H=function(e){var t=e.error;return t?Object(Y.jsx)(l.a.Text,{type:"danger",children:null===t||void 0===t?void 0:t.message}):null},Q=B.a.div(a||(a=Object(d.a)(["\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),V=B.a.div(c||(c=Object(d.a)(["\n  padding: 3.2rem;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),J=n(124),U=n(165),G=Object(U.b)({name:"auth",initialState:{user:null},reducers:{setUser:function(e,t){e.user=t.payload}}}),W=G.actions.setUser,X=function(e){return e.auth.user},Z=function(e){return function(t){return function(e){return I("/login",{method:"post",headers:{"Content-Type":"application/json"},data:e}).then(function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return Promise.reject(e)}))}(e).then((function(e){return t(W(e))}))}},$=function(e){return function(t){return function(e){return I("/register",{method:"post",headers:{"Content-Type":"application/json"},data:e}).then(function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return Promise.reject(e)}))}(e).then((function(e){return t(W(e))}))}};o.a.createContext(void 0).displayName="AuthContext";var ee,te,ne,re,ae,ce,ie,oe,se,ue,de,je=function(){var e=Object(m.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.localStorage.getItem(T))){e.next=6;break}return e.next=4,I("/me",{token:t});case 4:return n=e.sent,e.abrupt("return",n.user);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(e){var t=e.children,n=R(void 0,{isThrowError:!1}),r=n.run,a=n.isLoading,c=n.isIdel,i=n.isError,o=n.error,s=Object(J.b)();return P((function(){r(s((function(e){return je().then((function(t){return e(W(t))}))})))})),a||c?Object(Y.jsx)(K,{}):i?Object(Y.jsx)(_,{error:o}):Object(Y.jsx)("div",{children:t})},be=function(){var e=Object(J.c)(X),t=Object(J.b)();return{user:e,login:function(e){return t(Z(e))},register:function(e){return t($(e))},logout:function(){return t((function(e){return S().then((function(){return e(W(null))}))}))}}},Oe=n(412),fe=n(415),he=function(e){var t=e.onError,n=be().login,r=R(void 0,{isThrowError:!0}),a=r.run,c=r.isLoading,i=function(){var e=Object(m.a)(p.a.mark((function e(r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a(n(r));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return Object(Y.jsxs)(Oe.a,{onFinish:i,children:[Object(Y.jsx)(Oe.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}],children:Object(Y.jsx)(fe.a,{placeholder:"\u7528\u6237\u540d"})}),Object(Y.jsx)(Oe.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:Object(Y.jsx)(fe.a,{type:"password",placeholder:"\u5bc6\u7801",autoComplete:"true"})}),Object(Y.jsx)(Oe.a.Item,{children:Object(Y.jsx)(ye,{loading:c,htmlType:"submit",type:"primary",children:"\u767b\u5f55"})})]})},pe=function(e){var t=e.onError,n=be().register,r=R(void 0,{isThrowError:!0}),a=r.run,c=r.isLoading,i=function(){var e=Object(m.a)(p.a.mark((function e(r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r.passwordc===r.password){e.next=3;break}throw new Error("\u8f93\u5165\u786e\u8ba4\u5bc6\u7801\u4e0d\u4e00\u81f4");case 3:return e.next=5,a(n(r));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(Y.jsxs)(Oe.a,{onFinish:i,children:[Object(Y.jsx)(Oe.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}],children:Object(Y.jsx)(fe.a,{type:"text",placeholder:"\u7528\u6237\u540d"})}),Object(Y.jsx)(Oe.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:Object(Y.jsx)(fe.a,{type:"password",placeholder:"\u5bc6\u7801",autoComplete:"true"})}),Object(Y.jsx)(Oe.a.Item,{name:"passwordc",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801"}],children:Object(Y.jsx)(fe.a,{type:"password",placeholder:"\u786e\u8ba4\u5bc6\u7801",autoComplete:"true"})}),Object(Y.jsx)(Oe.a.Item,{children:Object(Y.jsx)(ye,{loading:c,htmlType:"submit",type:"primary",children:"\u6ce8\u518c"})})]})},me=function(){var e=Object(i.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(null),c=Object(j.a)(a,2),o=c[0],s=c[1];return Object(Y.jsxs)(Ie,{children:[Object(Y.jsx)(we,{}),Object(Y.jsxs)(xe,{children:[Object(Y.jsx)(ve,{src:"/text.png"}),Object(Y.jsxs)(ge,{children:[Object(Y.jsx)(ke,{children:n?"\u8bf7\u6ce8\u518c":"\u7edf\u4e00\u8ba4\u8bc1\u767b\u5f55"}),o?Object(Y.jsx)(l.a.Text,{type:"danger",children:null===o||void 0===o?void 0:o.message}):null,n?Object(Y.jsx)(pe,{onError:s}):Object(Y.jsx)(he,{onError:s}),Object(Y.jsx)(b.a,{}),Object(Y.jsx)(O.a,{type:"link",onClick:function(){return r(!n)},children:n?"\u5df2\u7ecf\u6709\u5e10\u53f7\u4e86\uff1f\u76f4\u63a5\u767b\u5f55":"\u6ca1\u6709\u8d26\u53f7?\u6ce8\u518c\u65b0\u8d26\u53f7"})]})]})]})},xe=B.a.main(ee||(ee=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),ve=B.a.img(te||(te=Object(d.a)(["\n  width: 200px;\n  height: 100px;\n"]))),ge=Object(B.a)(f.a)(ne||(ne=Object(d.a)(["\n  width: 30rem;\n  min-height: 36rem;\n  padding: 3.2rem 2rem;\n  margin-left: 20rem;\n  border-radius: 0.3rem;\n  box-sizing: border-box;\n  box-shadow: rgba(0, 0, 0, 0.1) 0 0 10px;\n  text-align: center;\n  background: url(/login-box.png) no-repeat;\n  background-size: 100% 100%;\n  border: none;\n"]))),ye=Object(B.a)(O.a)(re||(re=Object(d.a)(["\n  width: 100%;\n"]))),ke=B.a.h2(ae||(ae=Object(d.a)(["\n  margin: 3.4rem 0 2.4rem;\n  color: rgb(94, 108, 132);\n  font-size: 1.5rem;\n"]))),we=B.a.header(ce||(ce=Object(d.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  height: 8rem;\n"]))),Ie=B.a.div(ie||(ie=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-height: 100vh;\n  background: url(/login-bg.png) no-repeat 50%/100% auto;\n"]))),Ce=n(137),Te=["value","onChange","defaultOptionName","options"],Ee=function(e){var t=e.value,n=e.onChange,r=e.defaultOptionName,a=e.options,c=Object(v.a)(e,Te);return Object(Y.jsxs)(Ce.a,Object(x.a)(Object(x.a)({value:(null===a||void 0===a?void 0:a.length)?Se(t):0,onChange:function(e){return null===n||void 0===n?void 0:n(Se(e)||void 0)}},c),{},{children:[r?Object(Y.jsx)(Ce.a.Option,{value:0,children:r}):null,null===a||void 0===a?void 0:a.map((function(e){return Object(Y.jsx)(Ce.a.Option,{value:e.id,children:e.name},e.id)}))]}))},Se=function(e){return isNaN(Number(e))?0:Number(e)},Fe=function(e){var t=e.param,n=e.setParam,r=e.users;return Object(Y.jsxs)(Oe.a,{style:{marginBottom:"2rem"},layout:"inline",children:[Object(Y.jsx)(Oe.a.Item,{children:Object(Y.jsx)(fe.a,{placeholder:"\u9879\u76ee\u540d",value:t.name,onChange:function(e){return n(Object(x.a)(Object(x.a)({},t),{},{name:e.target.value}))}})}),Object(Y.jsx)(Oe.a.Item,{children:Object(Y.jsx)(Ee,{value:r.length?t.personId:void 0,defaultOptionName:"\u8d1f\u8d23\u4eba",options:r,onChange:function(e){return n(Object(x.a)(Object(x.a)({},t),{},{personId:e}))}})})]})},Ne=n(422),Pe=n(413),ze=n(410),Le=n(104),De=n(168),Re=n(135),Be=n.n(Re),Me=n(58),Ae=n(419),Ye=n(423),qe=n(162),Ke=function(e,t){var n=Object(qe.b)();return{onSuccess:function(){return n.invalidateQueries(e)},onMutate:function(r){return Object(m.a)(p.a.mark((function a(){var c;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=n.getQueryData(e),n.setQueryData(e,(function(e){return t(r,e)})),a.abrupt("return",{previousItems:c});case 3:case"end":return a.stop()}}),a)})))()},onError:function(t,r,a){n.setQueryData(e,a.previousItems)}}},_e=function(e){return Ke(e,(function(e,t){return(null===t||void 0===t?void 0:t.filter((function(t){return t.id!==e.id})))||[]}))},He=function(e){return Ke(e,(function(e,t){return(null===t||void 0===t?void 0:t.map((function(t){return t.id===e.id?Object(x.a)(Object(x.a)({},t),e):t})))||[]}))},Qe=function(e){return Ke(e,(function(e,t){return t?[].concat(Object(F.a)(t),[e]):[]}))},Ve=["run"],Je=function(e){var t=C(),n=R(void 0,{isThrowError:!0}),r=n.run,a=Object(v.a)(n,Ve);return Object(i.useEffect)((function(){r(t("/projects",{data:e}))}),[e]),Object(x.a)({},a)},Ue=function(e){var t=C();return Object(Ae.a)(["project",{id:e}],(function(){return t("/projects/".concat(e))}),{enabled:Boolean(e)})},Ge=function(e){var t=C();return Object(Ye.a)((function(e){return t("/projects",{data:e,method:"POST"})}),Qe(e))},We=function(e){var t=C();return Object(Ye.a)((function(e){return t("/projects/".concat(e.id),{method:"PATCH",data:e})}),He(e))},Xe=function(){var e=C();return Object(Ae.a)("types",(function(){return e("https://my-json-server.typicode.com/mengdongl/yixiao/projectType")}))},Ze=n(27),$e=function(e){var t=Object(Me.c)(),n=Object(j.a)(t,1)[0],r=et(),a=Object(i.useState)(e),c=Object(j.a)(a,1)[0];return[Object(i.useMemo)((function(){return function(e,t){var n=Object.entries(e).filter((function(e){var n=Object(j.a)(e,1)[0];return t.includes(n)}));return Object.fromEntries(n)}(Object.fromEntries(n),c)}),[n]),function(e){r(e)}]},et=function(){var e=Object(Me.c)(),t=Object(j.a)(e,2),n=t[0],r=t[1];return function(e){var t=N(Object(x.a)(Object(x.a)({},Object.fromEntries(n)),e));return r(t)}},tt=function(){return Object(Ze.g)().pathname.split("/")},nt=function(){var e=$e(["name","personId"]),t=Object(j.a)(e,2),n=t[0],r=t[1];return[Object(i.useMemo)((function(){return Object(x.a)(Object(x.a)({},n),{},{personId:Number(n.personId)||void 0})}),[n]),r]},rt=function(){var e=nt();return["projects",Object(j.a)(e,1)[0]]},at=function(){var e=$e(["projectCreate"]),t=Object(j.a)(e,2),n=t[0].projectCreate,r=t[1],a=$e(["editingProjectId"]),c=Object(j.a)(a,2),i=c[0].editingProjectId,o=c[1],s=et(),u=Ue(Number(i)),d=u.data,l=u.isLoading;return{projectModalOpen:"true"===n||Boolean(i),editingProject:d,isLoading:l,open:function(){r({projectCreate:!0})},close:function(){s({projectCreate:"",editingProjectId:""})},startEdit:function(e){o({editingProjectId:e})}}},ct=["users"],it=function(e){var t=e.users,n=Object(v.a)(e,ct),r=Xe().data,a=[{width:80,render:function(e,t){var n;return Object(Y.jsx)(Ne.a,{color:"green",children:null===r||void 0===r||null===(n=r.find((function(e){return e.id===t.type})))||void 0===n?void 0:n.name})}},{title:"\u540d\u79f0",sorter:function(e,t){return e.name.localeCompare(t.name)},render:function(e,n){var r;return Object(Y.jsxs)(st,{children:[Object(Y.jsx)(Me.b,{to:String(n.id),style:{color:"#606266"},children:n.name}),Object(Y.jsxs)("span",{children:["\u9879\u76ee\u8d1f\u8d23\u4eba\uff1a",(null===(r=t.find((function(e){return e.id===n.personId})))||void 0===r?void 0:r.name)||"\u672a\u77e5"]})]})}},{width:250,render:function(e,t){return Object(Y.jsxs)("div",{children:[Object(Y.jsx)("span",{style:{color:"rgb(96, 98, 102)",fontSize:"1.2rem"},children:"\u5df2\u5b8c\u62101134\u6761 / \u51711134\u6761"}),Object(Y.jsx)(Pe.a,{percent:90,showInfo:!1})]})}},{width:150,title:"\u90e8\u95e8",dataIndex:"organization"},{width:170,title:"\u521b\u5efa\u65f6\u95f4",render:function(e,t){return Object(Y.jsx)("span",{children:t.created?Be()(t.created).format("YYYY-MM-DD hh:mm"):"\u65e0"})}},{width:100,render:function(e,t,n){return Object(Y.jsx)(ot,{project:t,index:n})}}];return Object(Y.jsx)(ze.a,Object(x.a)({pagination:!1,columns:a,rowKey:function(e){return e.id},showHeader:!1},n))},ot=function(e){var t,n=e.project,r=e.index,a=at().startEdit,c=function(e){var t=C();return Object(Ye.a)((function(e){var n=e.id;return t("/projects/".concat(n),{method:"DELETE"})}),_e(e))}(rt()).mutate,o=Object(i.useContext)(ut),s=o?o.toTop:function(e){},u=Object(Y.jsxs)(Le.a,{children:[Object(Y.jsx)(Le.a.Item,{onClick:function(){s(r)},children:"\u7f6e\u9876"},"top"),Object(Y.jsx)(Le.a.Item,{onClick:(t=n.id,function(){a(t)}),children:"\u7f16\u8f91"},"edit"),Object(Y.jsx)(Le.a.Item,{onClick:function(e){return function(){c({id:e})}}(n.id),children:"\u5220\u9664"},"delete")]});return Object(Y.jsx)(De.a,{overlay:u,children:Object(Y.jsx)(O.a,{type:"link",children:"..."})})},st=B.a.div(oe||(oe=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  & > span {\n    margin-top: 1rem;\n    color: #909399;\n    font-size: 1.2rem;\n  }\n"]))),ut=o.a.createContext(void 0),dt=function(){var e=nt(),t=Object(j.a)(e,2),n=t[0],r=t[1],a=at().open,c=Object(i.useState)([]),o=Object(j.a)(c,2),s=o[0],u=o[1],d=C(),l=Je(z(n,200)),b=l.isLoading,f=l.data,h=l.setData;return P((function(){d("/users").then(u),d("https://my-json-server.typicode.com/mengdongl/yixiao/users").then((function(e){console.log(e),d("https://my-json-server.typicode.com/mengdongl/yixiao/users",{method:"POST",data:{name:"\u963f\u6e58"}})}))})),Object(Y.jsx)(Lt,{children:Object(Y.jsx)(ut.Provider,{value:{toTop:function(e){if(f){for(var t=Object(F.a)(f),n=t[e],r=e;r>0;r--)t[r]=t[r-1];t[0]=n,h(t)}}},children:Object(Y.jsxs)(Dt,{children:[Object(Y.jsx)(Rt,{children:Object(Y.jsxs)(q,{between:!0,children:[Object(Y.jsx)("h1",{children:"\u9879\u76ee\u5217\u8868"}),Object(Y.jsx)(Fe,{param:n,setParam:r,users:s}),Object(Y.jsx)(O.a,{onClick:function(){return a()},children:"\u521b\u5efa\u9879\u76ee"})]})}),Object(Y.jsx)(it,{loading:b,dataSource:f||[],users:s})]})})})};dt.whyDidYouRender=!1;var jt,lt,bt,Ot,ft,ht,pt,mt,xt,vt,gt,yt,kt,wt,It,Ct,Tt,Et,St,Ft,Nt,Pt,zt,Lt=B.a.div(se||(se=Object(d.a)(["\n  padding: 3.2rem;\n  background-color: #f0f2f5;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n"]))),Dt=B.a.div(ue||(ue=Object(d.a)(["\n  width: 70%;\n  background-color: white;\n  border: 1px solid #dcdfe6;\n  -webkit-box-shadow: 0 2px 4px 0 rgb(0 0 0 / 12%), 0 0 6px 0 rgb(0 0 0 / 4%);\n  box-shadow: 0 2px 4px 0 rgb(0 0 0 / 12%), 0 0 6px 0 rgb(0 0 0 / 4%);\n"]))),Rt=B.a.div(de||(de=Object(d.a)(["\n  padding: 1.2rem;\n  background-color: #f5f7fa;\n"]))),Bt=n(414),Mt=function(e){var t=C();return Object(Ae.a)(["tasks",N(e)],(function(e){var n=e.queryKey;return t("/tasks",{data:n[1]})}))},At=function(){var e,t=null===(e=Object(Ze.g)().pathname.match(/projects\/(\d+)/))||void 0===e?void 0:e[1];return"string"===typeof t?Number(t):void 0},Yt=function(){return Ue(At())},qt=function(){return{projectId:At()}},Kt=function(){return["kanbans",qt()]},_t=function(){var e=$e(["name","typeId","processorId","tagId","taskFrom","status","typeId"]),t=Object(j.a)(e,1)[0],n=At(),r=z(t.name,200);return Object(i.useMemo)((function(){return{projectId:n,typeId:Number(t.typeId)||void 0,processorId:Number(t.processorId)||void 0,tagId:Number(t.tagId)||void 0,name:r,taskFrom:t.taskFrom,status:Number(t.status)||void 0}}),[n,t,r])},Ht=function(){return["tasks",_t()]},Qt=function(){var e=$e(["editingTaskId"]),t=Object(j.a)(e,2),n=t[0].editingTaskId,r=t[1],a=function(e){var t=C();return Object(Ae.a)(["tasks",{id:e}],(function(){return t("/tasks/".concat(e))}),{enabled:Boolean(e)})}(Number(n)),c=a.data,o=a.isLoading;return{editingTaskId:n,editingTask:c,error:a.error,isLoading:o,startEdit:Object(i.useCallback)((function(e){return r({editingTaskId:e})}),[r]),close:Object(i.useCallback)((function(){return r({editingTaskId:""})}),[r])}},Vt=n.p+"static/media/task.8118694e.svg",Jt=n.p+"static/media/bug.bc7dca9d.svg",Ut=function(){var e=C();return Object(Ae.a)(["taskTypes"],(function(){return e("/taskTypes")}))},Gt=function(e){var t=e.kanbanId,n=e.handleRefresh,r=Object(i.useState)(""),a=Object(j.a)(r,2),c=a[0],o=a[1],s=Object(i.useState)(!1),u=Object(j.a)(s,2),d=u[0],l=u[1],b=function(e){var t=C();return Object(Ye.a)((function(e){return t("/tasks",{data:e,method:"POST"})}),Qe(e))}(Ht()).mutate,O=Yt().data,h=function(){l((function(e){return!e}))},x=function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({name:c,projectId:null===O||void 0===O?void 0:O.id,kanbanId:t,status:1,projectName:null===O||void 0===O?void 0:O.name});case 2:n(),l(!1),o("");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o("")}),[d]),d?Object(Y.jsx)(f.a,{children:Object(Y.jsx)(fe.a,{onBlur:h,placeholder:"\u9700\u8981\u505a\u4e9b\u4ec0\u4e48",autoFocus:!0,onPressEnter:x,value:c,onChange:function(e){return o(e.target.value)}})}):Object(Y.jsx)("div",{onClick:h,children:"+\u521b\u5efa\u4efb\u52a1"})},Wt=function(e){var t=e.keyword,n=e.name;if(!t)return Object(Y.jsx)(Y.Fragment,{children:n});var r=n.split(t);return Object(Y.jsx)(Y.Fragment,{children:r.map((function(e,n){return Object(Y.jsxs)("span",{children:[e,n===r.length-1?null:Object(Y.jsx)("span",{style:{color:"#257AFD"},children:t})]},n)}))})},Xt=["kanban"],Zt=function(e){var t=e.kanban,n=Object(v.a)(e,Xt),r=_t(),a=Mt(r).data,c=(null===a||void 0===a?void 0:a.filter((function(e){return e.kanbanId===t.id})))||[];return Object(Y.jsxs)(nn,Object(x.a)(Object(x.a)({},n),{},{children:[Object(Y.jsxs)(q,{between:!0,children:[Object(Y.jsx)("h3",{children:t.name}),Object(Y.jsx)(tn,{kanban:t})]}),Object(Y.jsxs)(rn,{children:[null===c||void 0===c?void 0:c.map((function(e){return Object(Y.jsx)("div",{children:Object(Y.jsx)(en,{task:e},e.id)},e.id)})),Object(Y.jsx)(Gt,{kanbanId:t.id,handleRefresh:function(){}})]})]}))},$t=function(e){var t,n=e.id,r=Ut().data,a=null===r||void 0===r||null===(t=r.find((function(e){return e.id===n})))||void 0===t?void 0:t.name;return a?Object(Y.jsx)("img",{alt:"task-icon",src:"task"===a?Vt:Jt}):null},en=function(e){var t=e.task,n=$e(["name"]),r=Object(j.a)(n,1)[0].name,a=Qt().startEdit;return Object(Y.jsxs)(f.a,{onClick:function(){return a(t.id)},style:{marginBottom:"0.5rem",cursor:"pointer"},children:[Object(Y.jsx)("p",{children:Object(Y.jsx)(Wt,{keyword:r,name:t.name})}),Object(Y.jsx)($t,{id:t.typeId})]},t.id)},tn=function(e){var t=e.kanban,n=function(e){var t=C();return Object(Ye.a)((function(e){var n=e.id;return t("/kanbans/".concat(n),{method:"DELETE"})}),_e(e))}(Kt()).mutate,r=Object(Y.jsx)(Le.a,{children:Object(Y.jsx)(Le.a.Item,{children:Object(Y.jsx)(O.a,{type:"link",onClick:function(){Bt.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u5220\u9664\u770b\u677f\u5417",onOk:function(){return n({id:t.id})}})},children:"\u5220\u9664"})})});return Object(Y.jsx)(De.a,{overlay:r,children:Object(Y.jsx)(O.a,{type:"link",children:"..."})})},nn=B.a.div(jt||(jt=Object(d.a)(["\n  min-width: 27rem;\n  border-radius: 6px;\n  background-color: rgb(244, 245, 247);\n  display: flex;\n  flex-direction: column;\n  padding: 0.7rem 0.7rem 1rem;\n  margin-right: 1.5rem;\n"]))),rn=B.a.div(lt||(lt=Object(d.a)(["\n  overflow: scroll;\n  flex: 1;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n"]))),an=function(){var e=Object(i.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],a=function(e){var t=C();return Object(Ye.a)((function(e){return t("/kanbans",{data:e,method:"POST"})}),Qe(e))}(Kt()).mutateAsync,c=At(),o=function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({projectId:c,name:n});case 2:r("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Y.jsx)(nn,{children:Object(Y.jsx)(fe.a,{size:"large",placeholder:"\u65b0\u5efa\u770b\u677f\u540d\u79f0",onPressEnter:o,value:n,onChange:function(e){return r(e.target.value)}})})},cn=function(e){var t=Ut().data;return Object(Y.jsx)(Ee,Object(x.a)({options:t},e))},on=function(e){var t=C();return Object(Ae.a)(["users",e],(function(){return t("/users",{data:e})}))},sn=function(e){var t=on().data;return Object(Y.jsx)(Ee,Object(x.a)({options:t},e))},un=function(){var e=_t(),t=$e(["name"]),n=Object(j.a)(t,1)[0].name,r=et();return Object(Y.jsxs)(q,{marginBottom:4,marginRight:!0,children:[Object(Y.jsx)(fe.a,{style:{width:"20rem"},placeholder:"\u4efb\u52a1\u540d",value:n,onChange:function(e){return r({name:e.target.value})}}),Object(Y.jsx)(sn,{defaultOptionName:"\u7ecf\u529e\u4eba",value:e.processorId,onChange:function(e){return r({processorId:e})}}),Object(Y.jsx)(cn,{defaultOptionName:"\u7c7b\u578b",value:e.typeId,onChange:function(e){return r({typeId:e})}}),Object(Y.jsx)(O.a,{onClick:function(){r({typeId:void 0,processorId:void 0,tagId:void 0,name:void 0})},children:"\u6e05\u7a7a"})]})},dn=n(88),jn=function(e){var t=C();return Object(Ae.a)(["epics",N(e)],(function(){return t("/epics",{data:e})}))},ln=function(e){var t=jn().data;return Object(Y.jsx)(Ee,Object(x.a)({options:t},e))},bn={labelCol:{span:8},wrapperCol:{span:16}},On=function(){var e=Qt(),t=e.editingTaskId,n=e.error,r=e.editingTask,a=e.isLoading,c=e.close,o=function(e){var t=C();return Object(Ye.a)((function(e){return t("/tasks/".concat(e.id),{method:"PATCH",data:e})}),He(e))}(Ht()),s=o.mutateAsync,u=o.isLoading,d=Object(dn.useForm)(),l=Object(j.a)(d,1)[0],b=Yt().data,O=function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(Object(x.a)(Object(x.a)(Object(x.a)({},r),l.getFieldsValue()),{},{status:(null===r||void 0===r?void 0:r.status)?null===r||void 0===r?void 0:r.status:1,projectName:(null===r||void 0===r?void 0:r.projectName)?null===r||void 0===r?void 0:r.projectName:b?b.name:""}));case 2:c(),l.resetFields();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){l.setFieldsValue(r)}),[l,r]),Object(Y.jsxs)(Bt.a,{forceRender:!0,visible:!!t,onCancel:function(){c(),l.resetFields()},onOk:O,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",confirmLoading:u,title:"\u7f16\u8f91\u4efb\u52a1",children:[Object(Y.jsx)(H,{error:n}),a?Object(Y.jsx)(M.a,{size:"large"}):Object(Y.jsxs)(Oe.a,Object(x.a)(Object(x.a)({},bn),{},{form:l,initialValues:r,children:[Object(Y.jsx)(Oe.a.Item,{label:"\u4efb\u52a1\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d"}],children:Object(Y.jsx)(fe.a,{})}),Object(Y.jsx)(Oe.a.Item,{label:"\u4efb\u52a1\u7ec4",name:"epicId",children:Object(Y.jsx)(ln,{defaultOptionName:"\u4efb\u52a1\u7ec4"})}),Object(Y.jsx)(Oe.a.Item,{label:"\u7ecf\u529e\u4eba",name:"processorId",children:Object(Y.jsx)(sn,{defaultOptionName:"\u7ecf\u529e\u4eba"})}),Object(Y.jsx)(Oe.a.Item,{label:"\u7c7b\u578b",name:"typeId",children:Object(Y.jsx)(cn,{})})]}))]})},fn=function(){var e=Yt().data,t=function(e){var t=C();return Object(Ae.a)(["kanbans",N(e)],(function(){return t("/kanbans",{data:e})}))}(qt()),n=t.data,r=t.isLoading;return Object(Y.jsxs)(V,{children:[Object(Y.jsxs)("h1",{children:[null===e||void 0===e?void 0:e.name,"\u770b\u677f"]}),Object(Y.jsx)(un,{}),r?Object(Y.jsx)(M.a,{size:"large"}):Object(Y.jsxs)(hn,{children:[null===n||void 0===n?void 0:n.map((function(e){return Object(Y.jsx)(Zt,{kanban:e},e.id)})),Object(Y.jsx)(an,{})]}),e?Object(Y.jsx)(On,{}):null]})},hn=B.a.div(bt||(bt=Object(d.a)(["\n  display: flex;\n  overflow-x: scroll;\n  flex: 1;\n"]))),pn=n(421),mn=n(417),xn=function(){return{projectId:At()}},vn=function(){return["epics",xn()]},gn=function(e){var t=At(),n=function(e){var t=C();return Object(Ye.a)((function(e){return t("/epics",{data:e,method:"POST"})}),Qe(e))}(vn()),r=n.isLoading,a=n.mutate,c=n.error,o=Object(dn.useForm)(),s=Object(j.a)(o,1)[0],u=function(){var n=Object(m.a)(p.a.mark((function n(r){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a(Object(x.a)(Object(x.a)({},r),{},{projectId:t}));case 2:e.onClose();case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){s.resetFields()}),[s,e.visible]),Object(Y.jsx)(mn.a,{visible:e.visible,onClose:e.onClose,forceRender:!0,destroyOnClose:!0,width:"100%",children:Object(Y.jsx)(yn,{children:r?Object(Y.jsx)(M.a,{size:"large"}):Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("h1",{children:"\u521b\u5efa\u4efb\u52a1\u7ec4"}),Object(Y.jsx)(H,{error:c}),Object(Y.jsxs)(Oe.a,{form:s,layout:"vertical",style:{width:"40rem"},onFinish:u,children:[Object(Y.jsx)(Oe.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u7ec4\u540d"}],children:Object(Y.jsx)(fe.a,{placeholder:"\u8bf7\u8f93\u5165\u4efb\u52a1\u7ec4\u540d\u79f0"})}),Object(Y.jsx)(Oe.a.Item,{style:{textAlign:"right"},children:Object(Y.jsx)(O.a,{loading:r,type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})]})})})},yn=B.a.div(Ot||(Ot=Object(d.a)(["\n  height: 80vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),kn=function(){var e=Yt().data,t=jn(xn()).data,n=Mt(Object(i.useMemo)((function(){return{projectId:null===e||void 0===e?void 0:e.id}}),[e])).data,r=function(e){var t=C();return Object(Ye.a)((function(e){var n=e.id;return t("/epics/".concat(n),{method:"DELETE"})}),_e(e))}(vn()).mutate,a=Object(i.useState)(!1),c=Object(j.a)(a,2),o=c[0],s=c[1];return Object(Y.jsxs)(V,{children:[Object(Y.jsxs)(q,{between:!0,children:[Object(Y.jsxs)("h1",{children:[null===e||void 0===e?void 0:e.name,"\u4efb\u52a1\u7ec4"]}),Object(Y.jsx)(O.a,{onClick:function(){return s(!0)},children:"\u521b\u5efa\u4efb\u52a1\u7ec4"})]}),Object(Y.jsx)(pn.b,{style:{overflow:"scroll"},dataSource:t,itemLayout:"vertical",renderItem:function(t){return Object(Y.jsxs)(pn.b.Item,{children:[Object(Y.jsx)(pn.b.Item.Meta,{title:Object(Y.jsxs)(q,{between:!0,children:[Object(Y.jsx)("span",{children:t.name}),Object(Y.jsx)(O.a,{onClick:function(){return function(e){Bt.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u9879\u76ee\u7ec4\uff1a".concat(e.name),content:"\u70b9\u51fb\u786e\u5b9a\u5220\u9664",okText:"\u786e\u5b9a",onOk:function(){r({id:e.id})}})}(t)},type:"link",children:"\u5220\u9664"})]}),description:Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{children:["\u5f00\u59cb\u65f6\u95f4\uff1a",Be()(t.start).format("YYYY-MM-DD")]}),Object(Y.jsxs)("div",{children:["\u7ed3\u675f\u65f6\u95f4\uff1a",Be()(t.end).format("YYYY-MM-DD")]})]})}),Object(Y.jsx)("div",{children:null===n||void 0===n?void 0:n.filter((function(e){return e.epicId===t.id})).map((function(t){return Object(Y.jsx)(Me.b,{to:"/projects/".concat(null===e||void 0===e?void 0:e.id,"/kanban?editingTaskId=").concat(t.id),children:t.name},t.id)}))})]})}}),Object(Y.jsx)(gn,{visible:o,onClose:function(){return s(!1)}})]})},wn=function(){var e=tt();return Object(Y.jsxs)(Tn,{children:[Object(Y.jsx)(In,{children:Object(Y.jsxs)(Le.a,{mode:"inline",selectedKeys:e,children:[Object(Y.jsx)(Le.a.Item,{children:Object(Y.jsx)(Me.b,{to:"kanban",children:"\u770b\u677f"})},"kanban"),Object(Y.jsx)(Le.a.Item,{children:Object(Y.jsx)(Me.b,{to:"epic",children:"\u4efb\u52a1\u7ec4"})},"epic")]})}),Object(Y.jsx)(Cn,{children:Object(Y.jsxs)(Ze.d,{children:[Object(Y.jsx)(Ze.b,{path:"kanban",element:Object(Y.jsx)(fn,{})}),Object(Y.jsx)(Ze.b,{path:"epic",element:Object(Y.jsx)(kn,{})}),Object(Y.jsx)(Ze.a,{to:window.location.pathname+"/kanban",replace:!0})]})})]})},In=B.a.aside(ft||(ft=Object(d.a)(["\n  background-color: rgb(244, 245, 247);\n  display: flex;\n"]))),Cn=B.a.div(ht||(ht=Object(d.a)(["\n  box-shadow: -5px 0 5px -5px rgba(0, 0, 0, 0.1);\n  display: flex;\n  overflow: hidden;\n"]))),Tn=B.a.div(pt||(pt=Object(d.a)(["\n  display: grid;\n  grid-template-columns: 16rem 1fr;\n  width: 100%;\n  height: 100%;\n"]))),En=function(e){var t=Xe().data;return t?Object(Y.jsx)(Ee,Object(x.a)({options:t},e)):null},Sn=function(){var e=at(),t=e.projectModalOpen,n=e.editingProject,r=e.isLoading,a=e.close,c=(n?We:Ge)(rt()),o=c.mutateAsync,s=c.isLoading,u=Object(dn.useForm)(),d=Object(j.a)(u,1)[0],l=n?"\u7f16\u8f91\u9879\u76ee":"\u65b0\u589e\u9879\u76ee",b=function(){d.resetFields(),a()};return Object(i.useEffect)((function(){n||d.setFields([{name:"type",value:1}])}),[t,d,n]),Object(i.useEffect)((function(){d.setFieldsValue(n)}),[n,d]),Object(Y.jsx)(mn.a,{width:"100%",forceRender:!0,visible:t,onClose:b,children:Object(Y.jsx)(Fn,{children:r?Object(Y.jsx)(M.a,{size:"large"}):Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("h1",{children:l}),Object(Y.jsx)(H,{error:void 0}),Object(Y.jsxs)(Oe.a,{form:d,layout:"vertical",style:{width:"40rem"},onFinish:function(e){o(Object(x.a)(Object(x.a)({},n),e)).then((function(){b()}))},children:[Object(Y.jsx)(Oe.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d"}],children:Object(Y.jsx)(fe.a,{placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0"})}),Object(Y.jsx)(Oe.a.Item,{label:"\u90e8\u95e8",name:"organization",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d"}],children:Object(Y.jsx)(fe.a,{placeholder:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d"})}),Object(Y.jsx)(Oe.a.Item,{label:"\u8d1f\u8d23\u4eba",name:"personId",children:Object(Y.jsx)(sn,{defaultOptionName:"\u8d1f\u8d23\u4eba"})}),Object(Y.jsx)(Oe.a.Item,{label:"\u9879\u76ee\u7c7b\u578b",name:"type",children:Object(Y.jsx)(En,{})}),Object(Y.jsx)(Oe.a.Item,{style:{textAlign:"right"},children:Object(Y.jsx)(O.a,{type:"primary",htmlType:"submit",loading:s,children:"\u63d0\u4ea4"})})]})]})})})},Fn=B.a.div(mt||(mt=Object(d.a)(["\n  height: 80vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),Nn=n(125),Pn=n(70),zn=n(196),Ln=n(416),Dn=["taskTypes"],Rn=function(e){var t=e.taskTypes,n=Object(v.a)(e,Dn),r=be().user,a=_t();a.typeId=a.typeId?a.typeId:null===t||void 0===t?void 0:t[0].id;var c=Mt(a),o=c.data,s=c.isLoading,u=Object(i.useContext)(Kn).taskStatus,d=Qt().startEdit,j=[{width:40,render:function(e,n){var r;return Object(Y.jsx)(Ne.a,{color:"blue",icon:Object(Y.jsx)(Ln.a,{}),children:null===(r=t.find((function(e){return e.id===n.typeId})))||void 0===r?void 0:r.name})}},{width:100,render:function(e,t){var n;return Object(Y.jsx)("div",{style:{textAlign:"center",fontSize:"1.4rem",color:"#606266"},children:null===(n=u.find((function(e){return e.id===t.status})))||void 0===n?void 0:n.name})}},{dataIndex:"name",render:function(e,t){return Object(Y.jsx)("div",{style:{fontSize:"1.6rem",color:"#606266"},onClick:function(){return d(t.id)},children:e})}},{width:80,render:function(){return Object(Y.jsx)("span",{children:null===r||void 0===r?void 0:r.name})}},{width:80,render:function(e,t){return Object(Y.jsx)(Ne.a,{children:t.projectName})}},{width:150,render:function(e,t){return Object(Y.jsx)("span",{children:t.note})}}];return Object(Y.jsx)(ze.a,Object(x.a)(Object(x.a)({},n),{},{dataSource:o||[],columns:j,rowKey:function(e){return e.id},showHeader:!1,loading:s}))},Bn=function(){var e=$e(["taskFrom","status","typeId"]),t=Object(j.a)(e,1)[0];return Object(i.useMemo)((function(){return{taskFrom:t.taskFrom,typeId:Number(t.typeId)||void 0,status:Number(t.status)||void 0}}),[t])},Mn=function(){var e=Bn(),t=e.typeId,n=e.status,r=et(),a=Ut().data,c=Object(i.useContext)(Kn).taskStatus,o={right:Object(Y.jsx)(Ee,{options:c,value:n,placeholder:"\u72b6\u6001",defaultOptionName:"\u5168\u90e8",onChange:function(e){r({status:e})},style:{width:"100px"}})};return Object(Y.jsx)(zn.a,{type:"card",activeKey:String(t||(null===a||void 0===a?void 0:a[0].id)),defaultValue:null===a||void 0===a?void 0:a[0].id,onChange:function(e){r({typeId:e})},tabBarExtraContent:o,children:null===a||void 0===a?void 0:a.map((function(e){return Object(Y.jsx)(zn.a.TabPane,{tab:e.name,children:Object(Y.jsx)(Rn,{taskTypes:a})},e.id)}))})},An=function(){var e=Object(Ze.h)(),t=Bn().taskFrom,n=et(),r={right:Object(Y.jsx)(O.a,{type:"link",onClick:function(){e("/projects")},children:"\u65b0\u589e\u4efb\u52a1"})};return Object(Y.jsx)(Yn,{children:Object(Y.jsxs)(zn.a,{type:"card",tabBarExtraContent:r,activeKey:t,onChange:function(e){n({taskFrom:e})},children:[Object(Y.jsx)(zn.a.TabPane,{tab:"\u5f85\u6211\u5904\u7406",children:Object(Y.jsx)(Mn,{})},"wait"),Object(Y.jsx)(zn.a.TabPane,{tab:"\u6211\u7684\u521b\u5efa",children:Object(Y.jsx)(Mn,{})},"mine"),Object(Y.jsx)(zn.a.TabPane,{tab:"\u6284\u9001\u7ed9\u6211",children:Object(Y.jsx)(Mn,{})},"other")]})})},Yn=B.a.div(xt||(xt=Object(d.a)(['\n  & p {\n    margin: 0;\n  }\n  & > .ant-tabs-card .ant-tabs-content {\n    margin-top: -16px;\n  }\n  & > .ant-tabs-card .ant-tabs-content > .ant-tabs-tabpane {\n    padding: 16px;\n    background: #fff;\n  }\n  & > .ant-tabs-card > .ant-tabs-nav::before {\n    display: none;\n  }\n  & > .ant-tabs-card .ant-tabs-tab,\n  [data-theme="compact"] & > .ant-tabs-card .ant-tabs-tab {\n    background: transparent;\n    border-color: transparent;\n  }\n  & > .ant-tabs-card .ant-tabs-tab-active,\n  [data-theme="compact"] & > .ant-tabs-card .ant-tabs-tab-active {\n    background: #fff;\n    border-color: #fff;\n  }\n\n  & > .ant-tabs-card .ant-tabs-tab-btn {\n    font-size: 1.4rem;\n    font-weight: 400;\n  }\n']))),qn=["project"],Kn=o.a.createContext({users:[],projectTypes:[],taskStatus:[]}),_n=function(){var e=on().data,t=Xe().data;return Object(Y.jsx)(Vn,{children:Object(Y.jsxs)(Kn.Provider,{value:{users:e||[],projectTypes:t||[],taskStatus:[{name:"\u65b0\u5efa",id:1},{name:"\u8fdb\u884c\u4e2d",id:2},{name:"\u5b8c\u6210",id:3}]},children:[Object(Y.jsx)(Jn,{children:Object(Y.jsx)(Hn,{})}),Object(Y.jsx)(Un,{children:Object(Y.jsx)(An,{})})]})})},Hn=function(){var e=Je(),t=e.isLoading,n=e.data,r=n?n.slice(0,3):[],a=Object(Ze.h)(),c=function(e){a(e)};return t?Object(Y.jsx)(M.a,{size:"large"}):Object(Y.jsxs)(Nn.a,{gutter:16,children:[r.map((function(e){return Object(Y.jsx)(Pn.a,{span:7,children:Object(Y.jsx)(Qn,{project:e,onClick:function(){c("/projects/".concat(e.id))}})},e.id)})),r.length>=3?Object(Y.jsx)(Pn.a,{span:3,children:Object(Y.jsx)(f.a,{hoverable:!0,bodyStyle:{paddingLeft:0,paddingRight:0,textAlign:"center"},onClick:function(){c("/projects")},children:"..."})}):null]})},Qn=function(e){var t,n=e.project,r=Object(v.a)(e,qn),a=Object(i.useContext)(Kn).projectTypes;return Object(Y.jsx)(f.a,Object(x.a)(Object(x.a)({hoverable:!0,bodyStyle:{padding:"0"}},r),{},{children:Object(Y.jsxs)(Gn,{children:[Object(Y.jsx)(Pe.a,{type:"circle",style:{height:"100%",margin:"1rem"},width:46,showInfo:!1,strokeWidth:12}),Object(Y.jsxs)("div",{className:"project-content",children:[Object(Y.jsx)("div",{children:n.name}),Object(Y.jsx)("div",{children:null===(t=a.find((function(e){return e.id===n.type})))||void 0===t?void 0:t.name})]}),Object(Y.jsxs)("div",{className:"project-detail",children:[Object(Y.jsx)("span",{children:"0"}),Object(Y.jsx)("div",{children:"\u6211\u7684\u5f85\u529e"})]})]})}))},Vn=B.a.div(vt||(vt=Object(d.a)(["\n  padding: 3.2rem;\n  height: 100%;\n  background-color: #f0f2f5;\n"]))),Jn=B.a.div(gt||(gt=Object(d.a)(["\n  width: 100%;\n  margin-bottom: 2.4rem;\n"]))),Un=B.a.div(yt||(yt=Object(d.a)(["\n  width: 100%;\n  border: 1px solid #dcdfe6;\n  -webkit-box-shadow: 0 2px 4px 0 rgb(0 0 0 / 12%), 0 0 6px 0 rgb(0 0 0 / 4%);\n  box-shadow: 0 2px 4px 0 rgb(0 0 0 / 12%), 0 0 6px 0 rgb(0 0 0 / 4%);\n"]))),Gn=B.a.div(kt||(kt=Object(d.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  .project-content {\n    flex-basis: 100%;\n    & div:first-of-type {\n      font-size: 1.4rem;\n      margin-bottom: 1rem;\n    }\n    & div:last-of-type {\n      font-size: 1.2rem;\n      color: #909399;\n    }\n  }\n  & > .project-detail {\n    width: 8rem;\n    height: 100%;\n    text-align: center;\n    border-left: 1px solid #dcdfe6;\n    flex-shrink: 0;\n    span {\n      font-size: 3.6rem;\n      color: #303133;\n    }\n    div {\n      line-height: 18px;\n      font-size: 12px;\n      white-space: nowrap;\n      overflow: hidden;\n      color: #909399;\n    }\n  }\n"]))),Wn=function(){return Object(Y.jsx)(Zn,{children:Object(Y.jsxs)(Me.a,{children:[Object(Y.jsx)(Xn,{}),Object(Y.jsx)(or,{children:Object(Y.jsxs)(Ze.d,{children:[Object(Y.jsx)(Ze.b,{path:"/works",element:Object(Y.jsx)(_n,{})}),Object(Y.jsx)(Ze.b,{path:"/projects",element:Object(Y.jsx)(dt,{})}),Object(Y.jsx)(Ze.b,{path:"/projects/:projectId/*",element:Object(Y.jsx)(wn,{})}),Object(Y.jsx)(Ze.a,{to:"/works"})]})}),Object(Y.jsx)(Sn,{}),Object(Y.jsx)(On,{})]})})},Xn=function(){var e=be(),t=e.logout,n=e.user,r=Object(Ze.h)(),a=tt();return Object(Y.jsxs)($n,{children:[Object(Y.jsxs)(er,{marginRight:!0,marginBottom:!1,children:[Object(Y.jsxs)(tr,{children:[Object(Y.jsx)(nr,{src:"/logo-simple.png"}),Object(Y.jsx)(rr,{children:"\u4ebf\u6548"})]}),Object(Y.jsxs)(ar,{mode:"horizontal",onClick:function(e){var t=e.key;e.keyPath,e.domEvent;r("/"+t)},selectedKeys:a,children:[Object(Y.jsx)(Le.a.Item,{style:{fontSize:"1.4rem"},children:"\u5de5\u4f5c\u53f0"},"works"),Object(Y.jsx)(Le.a.Item,{style:{fontSize:"1.4rem"},children:"\u9879\u76ee"},"projects")]})]}),Object(Y.jsx)(ir,{children:Object(Y.jsx)(De.a,{overlay:Object(Y.jsx)(Le.a,{children:Object(Y.jsx)(Le.a.Item,{children:Object(Y.jsx)(O.a,{type:"link",onClick:function(){return t()},children:"\u767b\u51fa"})},"logout")}),children:Object(Y.jsxs)(cr,{children:[Object(Y.jsx)("img",{src:"/tx.png",alt:""}),Object(Y.jsxs)("div",{children:["Hi, ",null===n||void 0===n?void 0:n.name]})]})})})]})},Zn=B.a.div(wt||(wt=Object(d.a)(['\n  display: grid;\n  grid-template-rows: 6rem 1fr;\n  grid-template-columns: 20rem 1fr 20rem;\n  grid-template-areas:\n    "header header header"\n    "main main main"\n    "footer footer footer";\n  height: 100vh;\n']))),$n=Object(B.a)(q)(It||(It=Object(d.a)(["\n  grid-area: header;\n  justify-content: space-between;\n  height: 100%;\n  background-color: #373d41;\n  -webkit-box-shadow: 0 1px 4px rgb(0 21 41 / 8%);\n  box-shadow: 0 1px 4px rgb(0 21 41 / 8%);\n  z-index: 1;\n"]))),er=Object(B.a)(q)(Ct||(Ct=Object(d.a)([""]))),tr=B.a.div(Tt||(Tt=Object(d.a)(["\n  height: 100%;\n  line-height: 50px;\n  background: #373d41;\n  text-align: center;\n  overflow: hidden;\n  padding: 0 16px;\n"]))),nr=B.a.img(Et||(Et=Object(d.a)(["\n  width: auto;\n  height: 28px;\n  vertical-align: middle;\n  margin-right: 8px;\n"]))),rr=B.a.div(St||(St=Object(d.a)(["\n  display: inline-block;\n  margin: 0;\n  color: #fff;\n  font-weight: 600;\n  line-height: 50px;\n  font-size: 16px;\n"]))),ar=Object(B.a)(Le.a)(Ft||(Ft=Object(d.a)(["\n  height: 50px;\n  padding: 0;\n  color: rgba(255, 255, 255, 0.65);\n  border-bottom-color: transparent;\n  background-color: rgb(55, 61, 65);\n"]))),cr=B.a.div(Nt||(Nt=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-right: 2rem;\n  cursor: pointer;\n  & > img {\n    cursor: pointer;\n    width: 24px;\n    height: 24px;\n    border-radius: 999px;\n    vertical-align: middle;\n    margin-right: 10px;\n  }\n  & > div {\n    font-size: 1.4rem;\n    color: hsla(0, 0%, 100%, 0.65);\n    vertical-align: middle;\n  }\n"]))),ir=B.a.div(Pt||(Pt=Object(d.a)([""]))),or=B.a.main(zt||(zt=Object(d.a)(["\n  grid-area: main;\n"])));var sr=function(){var e=be().user;return Object(Y.jsx)("div",{className:"App",children:e?Object(Y.jsx)(Wn,{}):Object(Y.jsx)(me,{})})},ur=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,424)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},dr=(n(404),n(418)),jr=n(230),lr=Object(U.a)({reducer:{auth:G.reducer}}),br=function(e){var t=e.children;return Object(Y.jsxs)(qe.a,{client:new dr.a,children:[Object(Y.jsx)(jr.ReactQueryDevtools,{initialIsOpen:!1}),Object(Y.jsx)(J.a,{store:lr,children:Object(Y.jsx)(le,{children:t})})]})},Or=n(145),fr=n(231),hr=n(146),pr=n(166),mr=function(e){Object(hr.a)(n,e);var t=Object(pr.a)(n);function n(){var e;Object(Or.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={error:null},e}return Object(fr.a)(n,[{key:"render",value:function(){var e=this.state.error,t=this.props,n=t.children,r=t.fallbackRender;if(!e)return n;r({error:e})}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),n}(o.a.Component);Object(A.b)((function(){return u.a.render(Object(Y.jsx)(o.a.StrictMode,{children:Object(Y.jsxs)(br,{children:[Object(Y.jsx)(A.a,{}),Object(Y.jsx)(mr,{fallbackRender:_,children:Object(Y.jsx)(sr,{})})]})}),document.getElementById("root"))})),ur()}},[[405,1,2]]]);
//# sourceMappingURL=main.58c452df.chunk.js.map